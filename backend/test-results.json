[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m
{"numTotalTestSuites":6,"numPassedTestSuites":2,"numFailedTestSuites":4,"numPendingTestSuites":0,"numTotalTests":14,"numPassedTests":9,"numFailedTests":5,"numPendingTests":0,"numTodoTests":0,"snapshot":{"added":0,"failure":false,"filesAdded":0,"filesRemoved":0,"filesRemovedList":[],"filesUnmatched":0,"filesUpdated":0,"matched":0,"total":0,"unchecked":0,"uncheckedKeysByFile":[],"unmatched":0,"updated":0,"didUpdate":false},"startTime":1751537651408,"success":false,"testResults":[{"assertionResults":[{"ancestorTitles":["Static File Serving Security","Path Traversal Protection"],"fullName":"Static File Serving Security Path Traversal Protection should block requests with double dots (..)","status":"failed","title":"should block requests with double dots (..)","duration":29.603500000000054,"failureMessages":["Error: expected 400 \"Bad Request\", got 404 \"Not Found\"\n    at C:\\Users\\Et Al\\Documents\\GitHub\\ParaSocial\\backend\\src\\routes\\__tests__\\staticFileServingSecurity.test.ts:146:10\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n----\n    at Test._assertStatus (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:267:14)\n    at C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:323:13\n    at Test._assertFunction (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:300:13)\n    at Test.assert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:179:23)\n    at Server.localAssert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:135:14)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2416:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"meta":{}},{"ancestorTitles":["Static File Serving Security","Path Traversal Protection"],"fullName":"Static File Serving Security Path Traversal Protection should block requests with tilde (~)","status":"passed","title":"should block requests with tilde (~)","duration":9.149999999999977,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Path Traversal Protection"],"fullName":"Static File Serving Security Path Traversal Protection should block complex path traversal attempts","status":"failed","title":"should block complex path traversal attempts","duration":5.604600000000005,"failureMessages":["Error: expected 400 \"Bad Request\", got 404 \"Not Found\"\n    at C:\\Users\\Et Al\\Documents\\GitHub\\ParaSocial\\backend\\src\\routes\\__tests__\\staticFileServingSecurity.test.ts:188:12\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n----\n    at Test._assertStatus (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:267:14)\n    at C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:323:13\n    at Test._assertFunction (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:300:13)\n    at Test.assert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:179:23)\n    at Server.localAssert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:135:14)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2416:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"meta":{}},{"ancestorTitles":["Static File Serving Security","Path Traversal Protection"],"fullName":"Static File Serving Security Path Traversal Protection should allow legitimate file access","status":"failed","title":"should allow legitimate file access","duration":13.153900000000021,"failureMessages":["AssertionError: expected undefined to be 'fake image content' // Object.is equality\n    at C:\\Users\\Et Al\\Documents\\GitHub\\ParaSocial\\backend\\src\\routes\\__tests__\\staticFileServingSecurity.test.ts:204:29\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:533:5\n    at runTest (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1056:11)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runFiles (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1262:5)\n    at startTests (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1271:3)\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/vitest/dist/chunks/runBaseTests.3qpJUEJM.js:126:11"],"meta":{}},{"ancestorTitles":["Static File Serving Security","Path Traversal Protection"],"fullName":"Static File Serving Security Path Traversal Protection should allow files with dots in names but not path traversal","status":"passed","title":"should allow files with dots in names but not path traversal","duration":8.898500000000013,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Security Headers"],"fullName":"Static File Serving Security Security Headers should set X-Content-Type-Options header","status":"passed","title":"should set X-Content-Type-Options header","duration":8.537700000000086,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Security Headers"],"fullName":"Static File Serving Security Security Headers should set X-Frame-Options header","status":"passed","title":"should set X-Frame-Options header","duration":7.323499999999967,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Security Headers"],"fullName":"Static File Serving Security Security Headers should set inline Content-Disposition for image files","status":"passed","title":"should set inline Content-Disposition for image files","duration":38.99350000000004,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Security Headers"],"fullName":"Static File Serving Security Security Headers should set inline Content-Disposition for video files","status":"passed","title":"should set inline Content-Disposition for video files","duration":16.596300000000042,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Security Headers"],"fullName":"Static File Serving Security Security Headers should set attachment Content-Disposition for other file types","status":"passed","title":"should set attachment Content-Disposition for other file types","duration":28.538500000000113,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","Dotfiles Protection"],"fullName":"Static File Serving Security Dotfiles Protection should deny access to dotfiles","status":"failed","title":"should deny access to dotfiles","duration":7.82770000000005,"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at C:\\Users\\Et Al\\Documents\\GitHub\\ParaSocial\\backend\\src\\routes\\__tests__\\staticFileServingSecurity.test.ts:312:10\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n----\n    at Test._assertStatus (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:267:14)\n    at C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:323:13\n    at Test._assertFunction (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:300:13)\n    at Test.assert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:179:23)\n    at Server.localAssert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:135:14)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2416:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"meta":{}},{"ancestorTitles":["Static File Serving Security","Dotfiles Protection"],"fullName":"Static File Serving Security Dotfiles Protection should deny access to files starting with dot","status":"failed","title":"should deny access to files starting with dot","duration":7.23580000000004,"failureMessages":["Error: expected 403 \"Forbidden\", got 404 \"Not Found\"\n    at C:\\Users\\Et Al\\Documents\\GitHub\\ParaSocial\\backend\\src\\routes\\__tests__\\staticFileServingSecurity.test.ts:325:12\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:146:14\n    at file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:533:11\n    at runWithTimeout (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:39:7)\n    at runTest (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1056:17)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n    at runSuite (file:///C:/Users/Et%20Al/Documents/GitHub/parasocial/backend/node_modules/@vitest/runner/dist/index.js:1205:15)\n----\n    at Test._assertStatus (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:267:14)\n    at C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:323:13\n    at Test._assertFunction (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:300:13)\n    at Test.assert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:179:23)\n    at Server.localAssert (C:\\Users\\Et Al\\Documents\\GitHub\\parasocial\\backend\\node_modules\\supertest\\lib\\test.js:135:14)\n    at Object.onceWrapper (node:events:632:28)\n    at Server.emit (node:events:518:28)\n    at emitCloseNT (node:net:2416:8)\n    at processTicksAndRejections (node:internal/process/task_queues:89:21)"],"meta":{}},{"ancestorTitles":["Static File Serving Security","File Not Found Handling"],"fullName":"Static File Serving Security File Not Found Handling should return 404 for non-existent files","status":"passed","title":"should return 404 for non-existent files","duration":4.899099999999976,"failureMessages":[],"meta":{}},{"ancestorTitles":["Static File Serving Security","File Not Found Handling"],"fullName":"Static File Serving Security File Not Found Handling should return 404 for empty filename","status":"passed","title":"should return 404 for empty filename","duration":3.748499999999922,"failureMessages":[],"meta":{}}],"startTime":1751537652174,"endTime":1751537652365.7485,"status":"failed","message":"","name":"C:/Users/Et Al/Documents/GitHub/ParaSocial/backend/src/routes/__tests__/staticFileServingSecurity.test.ts"}]}
